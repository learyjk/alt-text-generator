(()=>{var h=()=>{console.log("loaded");let l="https://alt-text-generator-api-kcffb7uzra-uc.a.run.app",e=document.querySelector("form"),o=document.querySelector("#results");if(!e||!o)return;e.parentElement?.classList.remove("w-form"),o.innerHTML="";let u=s=>{var n=s.match(/\bhttps?:\/\/\S+/gi);return n?.map(t=>t[t.length-1]===","?t.slice(0,-1):t)||[]};e.addEventListener("submit",async s=>{s.preventDefault();let n=e.querySelector(".w-button");if(!n)return;n.value="Generating Captions...";let r=new FormData(e),t=Object.fromEntries(r),a=u(t.field.trim());if(!a)return;let c=JSON.stringify({urls:a});console.log("body: ",c);let i=(await(await fetch(`${l}/describe`,{method:"POST",body:c,headers:{"Content-Type":"application/json"}})).json()).captions;console.log(i),i.forEach((p,m)=>{let f=p.description.captions[0].text,g=p.description.captions[0].confidence,d=document.createElement("p");d.innerText=`${m+1}: ${f} (confidence: ${g})`,o.appendChild(d)}),n.value="Submit"})};document.addEventListener("DOMContentLoaded",h);})();
//# sourceMappingURL=index.js.map
